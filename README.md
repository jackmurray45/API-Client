# API-Client
Program in C# that calls a remote API and writes the returned data to a local database. This project uses JSON.NET to make API calls and the Entity Framework to communicate with the database.

## Folder Structure
### Data
Stores DbContext class and migrations for the Entity Framework 
### HelperClasses
Classes used to call the remote API, Parse JSON, and write to the database
### Models
Classes that represent the database tables used by the Entity Framework

## Helper Classes
### HttpClientHelper
Static class that is used as a wrapper for the HttpClient class to organize and simply API Requests. 
The two methods in this class are Initialize and CallApi. Initialize defines the client variable 
to a new HttpClient object and configures its attributes for making API calls. CallApi takes the rest of 
the path of the designated URL and returns the JSON that was return from the API call.

### JsonParser
Static class that is used to parse the JSON gathered from the HttpClientHelper class and convert it into a lists of objects. 
Each of this List contains objects that are based off the classes in the models folder which are eventually used to write to the database
with the DatabaseWriter class. 

Both the ConvertPosts and ConvertComments required a DatabaseContext object as they both have attributes that are foreign keys which must be
assigned. The Posts table has a foreign key UserId which is from the Users table and Comments has a foreign key PostId which is from the Posts table.
In order for these foreign keys to be properly assigned they must use the foreign key id that is in the JSON result to find the id assigned 
when the entry from the other table was assigned to the local database.

For example, a User is returned from the the API call and its id in the JSON result is equal to 1. Now when that User is saved, it is given an id
generated by the local database (let's say 5) and its ApiUserId is set to 1. Now when a Post from the API call is parsed and it says in the JSON it has a userId
of 1, we must look up the Users table and find where the ApiUserId is equal to 1 so that we may assign it a proper UserId value in the Posts table (5 in this case).

### DatabaseWriter
Static class that is used to take lists of objects and write them to the local database. Each method in this class takes a list of objects that are
classes defined in the models folder. Utilizes the Entity Framework for clean, easy implementation. 

